!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(t,e){!function(){t.exports=this.wp.element}()},function(t,e){!function(){t.exports=this.wp.richText}()},function(t,e){!function(){t.exports=this.wp.i18n}()},function(t,e,n){var r=n(9),o=n(10),c=n(11);t.exports=function(t,e){return r(t)||o(t,e)||c()}},function(t,e){!function(){t.exports=this.wp.components}()},function(t,e){!function(){t.exports=this.wp.blockEditor}()},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n.apply(this,arguments)}t.exports=n},function(t,e,n){var r=n(12);t.exports=function(t,e){if(null==t)return{};var n,o,c=r(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(c[n]=t[n])}return c}},function(t,e){!function(){t.exports=this.wp.dom}()},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,c=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,c=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw c}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,o={},c=Object.keys(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}},function(t,e,n){"use strict";n.r(e);var r=n(1),o=n(3),c=n.n(o),i=n(0),u=n(5),a=n(2),l=Object(i.createElement)("svg",{focusable:"false",viewBox:"0 0 12 18",width:"12",height:"18",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},Object(i.createElement)("g",null,Object(i.createElement)("path",{d:"M2.641 18l.931-2.907h4.655L9.158 18h2.679L7.334 5.156H4.465L-.019 18h2.66zm4.978-4.959h-3.42l1.71-5.32 1.71 5.32zM5.416 4.08c.517 0 .925-.176 1.224-.528V4h.608V1.44C7.248.661 6.792.272 5.88.272c-.437 0-.776.084-1.016.252a.779.779 0 00-.36.668c0 .09.008.179.024.264h.568v-.208A.37.37 0 015.288.92c.128-.08.315-.12.56-.12.283 0 .48.053.592.16.112.107.168.27.168.488v.36l-.624.064c-1.115.117-1.672.51-1.672 1.176 0 .325.097.579.292.76.195.181.465.272.812.272zm.184-.512c-.427 0-.64-.184-.64-.552 0-.368.35-.6 1.048-.696l.6-.072v.872a1.325 1.325 0 01-1.008.448z"}))),f=n(6),s=n.n(f),b=n(7),p=n.n(b),v=n(4),d=n(8),m=function(t){var e=t.isActive,n=t.value,r=p()(t,["isActive","value"]),o=Object(i.useMemo)((function(){var t=window.getSelection();if(t.rangeCount){var e=t.getRangeAt(0);if(e)return Object(d.getRectangleFromRange)(e)}}),[e,n.start,n.end]);return o?Object(i.createElement)(v.Popover,s()({anchorRect:o},r)):null};function y(t){var e=t.isActive,n=t.value,o=t.addingAnnotation,u=t.stopAddingAnnotation,l=t.onChange,f=t.onFocus,s=Object(i.useState)(""),b=c()(s,2),p=b[0],d=b[1],y=function(t,e){return"<ruby><rb>".concat(t,"</rb><rt>").concat(e,"</rt></ruby> ")};return o?Object(i.createElement)(m,{value:n,isActive:e,headerTitle:Object(a.__)("Add Ruby character(s)","rubi"),position:"bottom center",focusOnMount:"firstElement",onClose:function(){d(""),u()},onFocus:f},Object(i.createElement)("form",{className:"sortabrilliant-rubi",onSubmit:function(t){t.preventDefault();var e=Object(r.getTextContent)(Object(r.slice)(n));if(e&&p){var o=Object(r.create)({html:y(e,p)});l(Object(r.insert)(n,o))}}},Object(i.createElement)("input",{type:"text",value:p,placeholder:Object(a.__)("Add Ruby character(s)","rubi"),onChange:function(t){return d(t.target.value)}}),Object(i.createElement)(v.IconButton,{icon:"editor-break",label:Object(a.__)("Apply","rubi"),type:"submit"}))):null}n.d(e,"name",(function(){return O}));var O="sortabrilliant/rubi";Object(r.registerFormatType)(O,{tagName:"span",className:"rubi",title:"Ruby",edit:function(t){var e=t.isActive,n=t.value,r=t.onChange,o=Object(i.useState)(!1),f=c()(o,2),s=f[0],b=f[1];return Object(i.createElement)(i.Fragment,null,!e&&"Range"===window.getSelection().type&&Object(i.createElement)(u.RichTextToolbarButton,{icon:l,title:Object(a.__)("Add Ruby character(s)","rubi"),onClick:function(){return b(!0)},isActive:e}),Object(i.createElement)(y,{key:e,isActive:e,addingAnnotation:s,stopAddingAnnotation:function(){b(!1)},value:n,onChange:r}))}}),Object(r.registerFormatType)("".concat(O,"-rt"),{title:"RubyText",tagName:"rt",className:null})}]);